(function(){"use strict";var e={1246:function(e,t,i){var a=i(5130),o=i(6768);const s={class:"app-container"};function l(e,t,i,a,l,n){const r=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.bF)(r)])}var n={name:"App"},r=i(1241);const c=(0,r.A)(n,[["render",l]]);var h=c,d=i(1387);const u={class:"content"};function p(e,t,i,a,s,l){const n=(0,o.g2)("Sidebar"),r=(0,o.g2)("ImageCanvas");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",u,[(0,o.bF)(n,{activeTool:s.activeTool,"onUpdate:activeTool":t[0]||(t[0]=e=>s.activeTool=e),onImageSelected:l.handleImageSelected,onOpenResizeModal:l.handleOpenResizeModal,onSaveImage:l.saveImage},null,8,["activeTool","onImageSelected","onOpenResizeModal","onSaveImage"]),(0,o.bF)(r,{activeTool:s.activeTool,selectedImage:s.selectedImage,onColorSelected:l.handleColorSelected,isResizeModalVisible:s.isResizeModalVisible,onCloseResizeModal:l.handleCloseResizeModal,ref:"imageCanvas"},null,8,["activeTool","selectedImage","onColorSelected","isResizeModalVisible","onCloseResizeModal"])])])}var g=i(4232);const m=e=>((0,o.Qi)("data-v-6dd2a4d1"),e=e(),(0,o.jt)(),e),v={class:"canvas-container"},f={key:3,class:"modal"},k=m((()=>(0,o.Lk)("h2",null,"Изменение размера изображения",-1))),b={class:"modal-content__item"},C=m((()=>(0,o.Lk)("label",{for:"resizeType"},"Тип изменения:",-1))),w=m((()=>(0,o.Lk)("option",{value:"percentage"},"Проценты",-1))),L=m((()=>(0,o.Lk)("option",{value:"pixels"},"Пиксели",-1))),M=[w,L],y={class:"modal-content__item"},I=m((()=>(0,o.Lk)("label",{for:"width"},"Ширина:",-1))),R=["value"],x={class:"modal-content__item"},X=m((()=>(0,o.Lk)("label",{for:"height"},"Высота:",-1))),T=["value"],A={class:"modal-content__item modal-content__ratio"},W={class:"modal-content__ratio-btn",for:"maintainAspectRatio"},S={class:"modal-content__item"},F={class:"modal-content__item"},_=m((()=>(0,o.Lk)("label",{for:"interpolation-algorithm"},"Алгоритм интерполяции:",-1))),E=m((()=>(0,o.Lk)("option",{value:"nearest-neighbor",title:"Алгоритм ближайшего соседа используется для изменения размера изображения путем выбора цвета пикселя из оригинального \n  изображения, наиболее близкого к центру пикселя в новом изображении."}," Ближайший сосед ",-1))),P=[E],U={class:"modal-content__item modal-content__button"};function H(e,t,i,s,l,n){const r=(0,o.g2)("ModalColor"),c=(0,o.g2)("CorrectionsModal"),h=(0,o.g2)("FiltrationModal"),d=(0,o.g2)("ImageFooter");return(0,o.uX)(),(0,o.CE)("div",v,[(0,o.Lk)("canvas",{id:"canvas",class:"canvas-editor",ref:"canvas",onMousedown:t[0]||(t[0]=(...e)=>n.handleMouseDown&&n.handleMouseDown(...e)),onMousemove:t[1]||(t[1]=(...e)=>n.handleMouseMove&&n.handleMouseMove(...e)),onMouseup:t[2]||(t[2]=(...e)=>n.handleMouseUp&&n.handleMouseUp(...e)),onMouseleave:t[3]||(t[3]=(...e)=>n.handleMouseLeave&&n.handleMouseLeave(...e))},null,544),l.colorInfoPanelVisible?((0,o.uX)(),(0,o.Wv)(r,{key:0,class:"canvas-modal",selectedColor:l.selectedColors,xMouse:l.selectedPixel.x,yMouse:l.selectedPixel.y,onCloseSetting:t[4]||(t[4]=e=>l.colorInfoPanelVisible=!1)},null,8,["selectedColor","xMouse","yMouse"])):(0,o.Q3)("",!0),l.correctionPanelVisible?((0,o.uX)(),(0,o.Wv)(c,{key:1,class:"canvas-modal",canvasRef:l.canvasRef||{},xMouse:l.offsetX,yMouse:l.offsetY,iw:l.imageWidth,ih:l.imageHeight,origImg:i.selectedImage,"onUpdate:origImg":t[5]||(t[5]=t=>e.origImg=t),onRenderImage:n.renderImage,onCloseSetting:t[6]||(t[6]=e=>l.correctionPanelVisible=!1)},null,8,["canvasRef","xMouse","yMouse","iw","ih","origImg","onRenderImage"])):(0,o.Q3)("",!0),l.filtrPanelVisible?((0,o.uX)(),(0,o.Wv)(h,{key:2,class:"canvas-modal",canvasRef:l.canvasRef||{},xMouse:l.offsetX,yMouse:l.offsetY,iw:l.imageWidth,ih:l.imageHeight,origImg:i.selectedImage,"onUpdate:origImg":t[7]||(t[7]=t=>e.origImg=t),onRenderImage:n.renderImage,onCloseSetting:t[8]||(t[8]=e=>l.filtrPanelVisible=!1)},null,8,["canvasRef","xMouse","yMouse","iw","ih","origImg","onRenderImage"])):(0,o.Q3)("",!0),(0,o.bF)(d,{imageWidth:l.imageWidth,imageHeight:l.imageHeight,selectedColor:l.selectedColor,selectedPixel:l.selectedPixel,activeTool:i.activeTool,selectedScale:l.selectedScale,onScaleChange:n.handleScaleChange},null,8,["imageWidth","imageHeight","selectedColor","selectedPixel","activeTool","selectedScale","onScaleChange"]),l.isModalVisible?((0,o.uX)(),(0,o.CE)("div",f,[(0,o.Lk)("div",{class:"modal-content modal-content__wrapper",onClick:t[17]||(t[17]=(0,a.D$)((()=>{}),["stop"]))},[k,(0,o.Lk)("div",b,[C,(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.resizeType=e),id:"resizeType",class:"transparent-input",onChange:t[10]||(t[10]=e=>n.updateModal(e))},M,544),[[a.u1,l.resizeType]])]),(0,o.Lk)("div",y,[I,(0,o.Lk)("input",{type:"number",value:l.newWidth,id:"width",min:"1",class:"transparent-input",onChange:t[11]||(t[11]=(...e)=>n.updateNewWidth&&n.updateNewWidth(...e))},null,40,R)]),(0,o.Lk)("div",x,[X,(0,o.Lk)("input",{type:"number",value:l.newHeight,id:"height",min:"1",class:"transparent-input",onChange:t[12]||(t[12]=(...e)=>n.updateNewHeight&&n.updateNewHeight(...e))},null,40,T)]),(0,o.Lk)("div",A,[(0,o.Lk)("label",W,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",id:"maintainAspectRatio","onUpdate:modelValue":t[13]||(t[13]=e=>l.maintainAspectRatio=e)},null,512),[[a.lH,l.maintainAspectRatio]]),(0,o.eW)(" Сохранить пропорции ")])]),(0,o.Lk)("div",S,[(0,o.Lk)("p",null," Размер до: "+(0,g.v_)((l.imageWidth*l.imageHeight/1e6).toFixed(4))+" Мп ",1),(0,o.Lk)("p",null," Размер после: "+(0,g.v_)(n.countPixels())+" Мп ",1)]),(0,o.Lk)("div",F,[_,(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.interpolationAlgorithm=e),id:"interpolation-algorithm",class:"transparent-input"},P,512),[[a.u1,l.interpolationAlgorithm]])]),(0,o.Lk)("div",U,[(0,o.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>n.handleModalConfirm&&n.handleModalConfirm(...e))},"Изменить размер"),(0,o.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>n.closeResizeModal&&n.closeResizeModal(...e))},"Отмена")])])])):(0,o.Q3)("",!0)])}const z={class:"footer"},V={class:"image-stat"},Y={key:0,class:"image-info"},O={key:1,class:"color-info"},N={class:"scale-selector"},$=["value"];function B(e,t,i,s,l,n){return(0,o.uX)(),(0,o.CE)("div",z,[(0,o.Lk)("div",V,[i.imageWidth&&i.imageHeight?((0,o.uX)(),(0,o.CE)("div",Y," Размер: "+(0,g.v_)(i.imageWidth)+"px x "+(0,g.v_)(i.imageHeight)+"px; ",1)):(0,o.Q3)("",!0),i.selectedColor?((0,o.uX)(),(0,o.CE)("div",O,[(0,o.eW)(" RGB ("+(0,g.v_)(i.selectedColor.r)+", "+(0,g.v_)(i.selectedColor.g)+", "+(0,g.v_)(i.selectedColor.b)+") ",1),(0,o.Lk)("div",{class:"color-preview",style:(0,g.Tr)({backgroundColor:`rgb(${i.selectedColor.r},${i.selectedColor.g},${i.selectedColor.b})`})},null,4),(0,o.eW)(" Координаты ("+(0,g.v_)(i.selectedPixel.x)+"; "+(0,g.v_)(i.selectedPixel.y)+") ",1)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",N,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.localScale=e),onChange:t[1]||(t[1]=(...e)=>n.handleScaleChange&&n.handleScaleChange(...e))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.scales,((e,t)=>((0,o.uX)(),(0,o.CE)("option",{key:t,value:e},(0,g.v_)(e)+"% ",9,$)))),128))],544),[[a.u1,l.localScale]])])])}var D={name:"ImageFooter",props:{imageWidth:Number,imageHeight:Number,selectedColor:Object,selectedPixel:Object,selectedScale:Number},data(){return{localScale:this.selectedScale,scales:[12,25,50,75,100,150,200,300]}},methods:{handleScaleChange(){this.$emit("scale-change",this.localScale)}}};const K=(0,r.A)(D,[["render",B],["__scopeId","data-v-11ab40de"]]);var j=K,Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE4AAABOCAYAAACOqiAdAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfklEQVR4nO3aXU7CQBRA4dmBbEBxCYbELWpYgj+bEk3ANShxCcdM2icNCR3a4dI537NmOoeWFrgpSZIkSZIkSZKkKQELYA1sgB3wAiwrrn8LvPZrb/pjWaQLiPbBf1/AqsL6q36tv/IxXaWo6F7dQ/ZTxuuj5TUOeUxR0V0a1I53RLTsLUVF975CzXhHRsu2KSq6GwG14g2Ilj2lqIDlgTfn0eMNjJaP6TpFBtwB30du6Ae4j7jGWTDhxmYbbcoNzj7aFBttJtqYG24u2hgbbzbaKQGaj1b47LUf+LeTf4lwVgw789q8PCvEayfaiPHaizZCvHajnRDPaJnhCnipFvDmUMDHkQI+ABfwI1cBP+RXipZG+N+Lhl9knidac2ce/lgTI9rszzz8QXp2IxA3KSq6ScjJoxXGe05RAZ+1ohXE26WocLCwONy61pk2t1HWRdDh6ffQw9NZPsD86uaZ2zw+michaw715btnv+a2P4aH8NEkSZIkSZIkSUoX7xe7JA+Waie2bQAAAABJRU5ErkJggg==";const G=e=>((0,o.Qi)("data-v-899fb5d6"),e=e(),(0,o.jt)(),e),Z={class:"sidebar"},J={class:"panel-header"},q=G((()=>(0,o.Lk)("img",{src:Q},null,-1))),ee=[q],te=G((()=>(0,o.Lk)("div",{class:"colors"},null,-1))),ie={class:"colors-info"},ae={class:"colors-picked"},oe={class:"color-parameters"},se=G((()=>(0,o.Lk)("p",null,"X:",-1))),le=G((()=>(0,o.Lk)("p",null,"Y:",-1))),ne={class:"colors-picked"},re={class:"color-parameters"},ce=G((()=>(0,o.Lk)("p",null,"X:",-1))),he=G((()=>(0,o.Lk)("p",null,"Y:",-1))),de={class:"colors-table"},ue={class:"colors-table-info"},pe={key:0,class:"tooltip"},ge={class:"color-parameters"},me={class:"color-param"},ve={class:"color-param"},fe={class:"colors-table-info"},ke={key:0,class:"tooltip"},be={class:"color-parameters"},Ce={class:"color-param"},we={class:"color-param"},Le={class:"colors-table"},Me={class:"colors-table-info"},ye={key:0,class:"tooltip"},Ie={class:"color-parameters"},Re={class:"color-param"},xe={class:"color-param"};function Xe(e,t,i,s,l,n){return(0,o.uX)(),(0,o.CE)("aside",Z,[(0,o.Lk)("div",J,[(0,o.Lk)("button",{class:"close-button",onClick:t[0]||(t[0]=(...e)=>n.closeSetting&&n.closeSetting(...e))},ee)]),te,(0,o.Lk)("div",ie,[(0,o.Lk)("div",ae,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.pickedButton=e),value:"button1",type:"radio",class:"color-button",style:(0,g.Tr)({background:l.color1})},null,4),[[a.XL,l.pickedButton]]),(0,o.Lk)("div",oe,[se,(0,o.Lk)("p",null,(0,g.v_)(l.color1X),1),le,(0,o.Lk)("p",null,(0,g.v_)(l.color1Y),1)])]),(0,o.Lk)("div",ne,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.pickedButton=e),value:"button2",type:"radio",class:"color-button",style:(0,g.Tr)({background:l.color2})},null,4),[[a.XL,l.pickedButton]]),(0,o.Lk)("div",re,[ce,(0,o.Lk)("p",null,(0,g.v_)(l.color2X),1),he,(0,o.Lk)("p",null,(0,g.v_)(l.color2Y),1)])]),(0,o.Lk)("div",de,[(0,o.Lk)("div",ue,[(0,o.Lk)("p",{class:"color-parameter",onMouseenter:t[3]||(t[3]=e=>l.showTooltipFlag=!0),onMouseleave:t[4]||(t[4]=e=>l.showTooltipFlag=!1)},[(0,o.eW)(" RGB "),l.showTooltipFlag?((0,o.uX)(),(0,o.CE)("span",pe,"Цветовая модель, сочетающая интенсивность красного, зеленого и синего света для создания цветов на цифровых дисплеях.")):(0,o.Q3)("",!0)],32),(0,o.Lk)("div",ge,[(0,o.Lk)("div",me,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.color1RGB.split(","),(e=>((0,o.uX)(),(0,o.CE)("p",{key:e},(0,g.v_)(e.trim()),1)))),128))]),(0,o.Lk)("div",ve,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.color2RGB.split(","),(e=>((0,o.uX)(),(0,o.CE)("p",{key:e},(0,g.v_)(e.trim()),1)))),128))])])]),(0,o.Lk)("div",fe,[(0,o.Lk)("p",{class:"color-parameter",onMouseenter:t[5]||(t[5]=e=>l.showTooltipFlag=!0),onMouseleave:t[6]||(t[6]=e=>l.showTooltipFlag=!1)},[(0,o.eW)(" XYZ "),l.showTooltipFlag?((0,o.uX)(),(0,o.CE)("span",ke,"Стандартное цветовое пространство, представляющее зрительное восприятие цветов человеком, используется в качестве основы для других цветовых пространств.")):(0,o.Q3)("",!0)],32),(0,o.Lk)("div",be,[(0,o.Lk)("div",Ce,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.color1XYZ.split(","),(e=>((0,o.uX)(),(0,o.CE)("p",{key:e},(0,g.v_)(e.trim()),1)))),128))]),(0,o.Lk)("div",we,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.color2XYZ.split(","),(e=>((0,o.uX)(),(0,o.CE)("p",{key:e},(0,g.v_)(e.trim()),1)))),128))])])])]),(0,o.Lk)("div",Le,[(0,o.Lk)("div",Me,[(0,o.Lk)("p",{class:"color-parameter",onMouseenter:t[7]||(t[7]=e=>l.showTooltipFlag=!0),onMouseleave:t[8]||(t[8]=e=>l.showTooltipFlag=!1)},[(0,o.eW)(" Lab "),l.showTooltipFlag?((0,o.uX)(),(0,o.CE)("span",ye,"Воспринимаемое однородное цветовое пространство с компонентами яркости (L*) и осями контраста цвета (a*, b*), идеально подходящими для точной цветопередачи и коррекции. ")):(0,o.Q3)("",!0)],32),(0,o.Lk)("div",Ie,[(0,o.Lk)("div",Re,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.color1Lab.split(","),(e=>((0,o.uX)(),(0,o.CE)("p",{key:e},(0,g.v_)(e.trim()),1)))),128))]),(0,o.Lk)("div",xe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.color2Lab.split(","),(e=>((0,o.uX)(),(0,o.CE)("p",{key:e},(0,g.v_)(e.trim()),1)))),128))])])])])]),l.contrast?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"contrast",style:(0,g.Tr)({color:l.contrast<4.5?"red":"white"})}," Контраст: "+(0,g.v_)(l.contrast)+":1 ",5)):(0,o.Q3)("",!0)])}var Te={name:"sidebar-setting",props:{selectedColor:String,xMouse:Number,yMouse:Number},data(){return{pickedButton:null,color1:null,color2:null,color1X:0,color1Y:0,color2X:0,color2Y:0,color1RGB:"",color2RGB:"",color1XYZ:"",color2XYZ:"",color1Lab:"",color2Lab:"",contrast:null,showTooltipFlag:!1}},methods:{closeSetting(){this.$emit("closeSetting")},updateColors(){const e=this.parseColor(this.selectedColor),t=this.rgbToXyz(e),i=this.xyzToLab(t);"button1"===this.pickedButton?(this.color1X=this.xMouse,this.color1Y=this.yMouse,this.color1RGB=this.prettyColor(e,!0),this.color1XYZ=this.prettyColor(t),this.color1Lab=this.prettyColor(i)):(this.color2X=this.xMouse,this.color2Y=this.yMouse,this.color2RGB=this.prettyColor(e,!0),this.color2XYZ=this.prettyColor(t),this.color2Lab=this.prettyColor(i)),this.color1&&this.color2&&(this.contrast=this.calculateContrastRatio(this.color1,this.color2))},prettyColor([e,t,i],a=!1){return a?`${e}, ${t}, ${i}`:`${e.toFixed(1)}, ${t.toFixed(1)}, ${i.toFixed(1)}`},calculateContrastRatio(e,t){const i=e=>(e/=255,e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)),a=e=>{const t=this.parseColor(e),a=i(t[0]),o=i(t[1]),s=i(t[2]);return.2126*a+.7152*o+.0722*s},o=a(e),s=a(t),l=Math.max(o,s),n=Math.min(o,s),r=(l+.05)/(n+.05);return r.toFixed(1)},parseColor(e){if("#"==e.substr(0,1)){var t=(e.length-1)/3,i=[17,1,.062272][t-1];return[Math.round(parseInt(e.substr(1,t),16)*i),Math.round(parseInt(e.substr(1+t,t),16)*i),Math.round(parseInt(e.substr(1+2*t,t),16)*i)]}return e.split("(")[1].split(")")[0].split(",").map((e=>+e))},rgbToXyz(e){let t=e[0]/255,i=e[1]/255,a=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,t*=100,i*=100,a*=100;const o=Math.round(.4124*t+.3576*i+.1805*a),s=Math.round(.2126*t+.7152*i+.0722*a),l=Math.round(.0193*t+.1192*i+.9505*a);return[o,s,l]},xyzToLab(e){const[t,i,a]=e,o=95.047,s=100,l=108.883,n=t/o,r=i/s,c=a/l,h=.008856,d=903.3,u=e=>e>h?Math.pow(e,1/3):(d*e+16)/116,p=Math.round(116*u(r)-16),g=Math.round(500*(u(n)-u(r))),m=Math.round(200*(u(r)-u(c)));return[p,g,m]}},watch:{selectedColor(e){"button1"===this.pickedButton&&(this.color1=e,this.updateColors()),"button2"===this.pickedButton&&(this.color2=e,this.updateColors())}}};const Ae=(0,r.A)(Te,[["render",Xe],["__scopeId","data-v-899fb5d6"]]);var We=Ae,Se=i.p+"img/W95-89.728ffb60.png";const Fe=e=>((0,o.Qi)("data-v-7e5aa84c"),e=e(),(0,o.jt)(),e),_e={class:"sidebar"},Ee={class:"panel-header"},Pe=Fe((()=>(0,o.Lk)("img",{src:Q},null,-1))),Ue=[Pe],He={class:"input-fields"},ze={class:"input-fields-wrapper"},Ve={class:"input-fields-i"},Ye=Fe((()=>(0,o.Lk)("label",{for:"input1"},"x1:",-1))),Oe=["value"],Ne={class:"input-fields-i"},$e=Fe((()=>(0,o.Lk)("label",{for:"output1"},"y1:",-1))),Be=["value"],De={class:"input-fields-wrapper"},Ke={class:"input-fields-i"},je=Fe((()=>(0,o.Lk)("label",{for:"input2"},"x2:",-1))),Qe=["value"],Ge={class:"input-fields-i"},Ze=Fe((()=>(0,o.Lk)("label",{for:"output2"},"y2:",-1))),Je=["value"],qe={class:"corrections-preview"},et={class:"custom-checkbox"},tt={key:1,src:Se,alt:"Предпросмотр",style:{width:"24px",height:"24px",cursor:"pointer"}},it={class:"curve-chart"},at={id:"chart",width:"100",height:"100",ref:"chart"},ot={class:"buttons"};function st(e,t,i,s,l,n){return(0,o.uX)(),(0,o.CE)("aside",_e,[(0,o.Lk)("div",Ee,[(0,o.Lk)("button",{class:"close-button",onClick:t[0]||(t[0]=(...e)=>n.closeSetting&&n.closeSetting(...e))},Ue)]),(0,o.Lk)("div",He,[(0,o.Lk)("div",ze,[(0,o.Lk)("div",Ve,[Ye,(0,o.Lk)("input",{id:"input1",value:l.input1,onChange:t[1]||(t[1]=(...e)=>n.updateX1&&n.updateX1(...e))},null,40,Oe)]),(0,o.Lk)("div",Ne,[$e,(0,o.Lk)("input",{id:"output1",value:l.output1,onChange:t[2]||(t[2]=(...e)=>n.updateY1&&n.updateY1(...e))},null,40,Be)])]),(0,o.Lk)("div",De,[(0,o.Lk)("div",Ke,[je,(0,o.Lk)("input",{id:"input2",value:l.input2,onChange:t[3]||(t[3]=(...e)=>n.updateX2&&n.updateX2(...e))},null,40,Qe)]),(0,o.Lk)("div",Ge,[Ze,(0,o.Lk)("input",{id:"output2",value:l.output2,onChange:t[4]||(t[4]=(...e)=>n.updateY2&&n.updateY2(...e))},null,40,Je)])]),(0,o.Lk)("div",qe,[(0,o.Lk)("div",et,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>l.togglePreview=e)},null,512),[[a.lH,l.togglePreview]]),l.togglePreview?((0,o.uX)(),(0,o.CE)("img",{key:0,src:Se,alt:"Предпросмотр",class:(0,g.C4)({"preview-active":l.togglePreview}),style:{width:"24px",height:"24px",cursor:"pointer"}},null,2)):((0,o.uX)(),(0,o.CE)("img",tt))])])]),(0,o.Lk)("div",it,[(0,o.Lk)("canvas",at,null,512)]),(0,o.Lk)("div",ot,[(0,o.Lk)("button",{class:"apply-button",onClick:t[6]||(t[6]=(...e)=>n.applyCorrection&&n.applyCorrection(...e))},"Применить"),(0,o.Lk)("button",{class:"reset-button",onClick:t[7]||(t[7]=(...e)=>n.resetValues&&n.resetValues(...e))},"Сброс")])])}var lt=i(3456),nt={name:"sidebar-correction",props:{xMouse:Number,yMouse:Number,origImg:Object,ih:Number,iw:Number,canvasRef:Object},data(){return{chartInstance:null,imgCorrected:!1,input1:0,output1:0,input2:255,output2:255,togglePreview:!1}},mounted(){this.chartRef=this.$refs.chart},methods:{closeSetting(){this.$emit("closeSetting")},normalizeHistogram(e){const t=Math.max(...e);return e.map((e=>e/t*255))},buildGraph(){const e=new Image;e.onload=()=>{const e=this.canvasRef?.getContext("2d");try{const t=e.getImageData(this.xMouse,this.yMouse,this.iw,this.ih),i=t.data,a=new Array(256).fill(0),o=new Array(256).fill(0),s=new Array(256).fill(0);for(let e=0;e<i.length;e+=4){const t=i[e],l=i[e+1],n=i[e+2];a[t]++,o[l]++,s[n]++}const l=this.normalizeHistogram(a),n=this.normalizeHistogram(o),r=this.normalizeHistogram(s);this.renderCurveChart(l,n,r)}catch(t){console.log(t)}},e.src=this.origImg},renderCurveChart(e,t,i){const a=this.chartRef?.getContext("2d");this.chartInstance&&this.chartInstance.destroy(),this.chartInstance=new lt.Ay(a,{type:"line",data:{labels:Array.from({length:256},((e,t)=>t)),datasets:[{label:"R",data:e,backgroundColor:"rgba(255, 0, 0, 1)",borderWidth:1,fill:!1},{label:"G",data:t,backgroundColor:"rgba(0, 255, 0, 1)",borderWidth:1,fill:!1},{label:"B",data:i,backgroundColor:"rgba(0, 0, 255, 1)",borderWidth:1,fill:!1},{label:"Линия",data:[{x:0,y:this.output1},{x:this.input1,y:this.output1},{x:this.input2,y:this.output2},{x:255,y:this.output2}],borderColor:"rgba(255, 255, 255, 1)",borderWidth:2,fill:!1,tension:0}]},options:{plugins:{legend:{labels:{color:"white"}}},animation:!1,aspectRatio:1,scales:{x:{display:!0,min:0,max:255,type:"linear",ticks:{color:"white"}},y:{display:!0,min:0,max:255,type:"linear",ticks:{color:"white"}}}}})},calculateCorrection(){try{const e=[];for(let o=0;o<this.input1;o++)e[o]=this.output1;for(let o=this.input1;o<this.input2;o++){const t=(this.output2-this.output1)/(this.input2-this.input1);let i=this.output1+t*(o-this.input1);i=Math.max(0,Math.min(255,i)),e[o]=i}for(let o=this.input2;o<256;o++)e[o]=this.output2;const t=this.canvasRef?.getContext("2d"),i=t.getImageData(this.xMouse,this.yMouse,this.iw,this.ih),a=i.data;for(let o=0;o<a.length;o+=4)a[o]=e[a[o]],a[o+1]=e[a[o+1]],a[o+2]=e[a[o+2]];t.putImageData(i,this.xMouse,this.yMouse),this.imgCorrected=!0}catch(e){console.log(e)}},revertCorrection(){this.buildGraph(),this.togglePreview=!1,this.$emit("renderImage")},applyCorrection(){this.closeSetting(),this.calculateCorrection(),this.buildGraph()},resetValues(){this.input1=0,this.output1=0,this.input2=255,this.output2=255,this.revertCorrection()},updateX1(e){const t=+e.target.value;!isNaN(t)&&t>=0&&t<this.input2?(this.input1=t,this.buildGraph()):(this.input1+=1,this.input1-=1)},updateY1(e){const t=+e.target.value;!isNaN(t)&&t>=0&&t<=255?(this.output1=t,this.buildGraph()):(this.output1+=1,this.output1-=1)},updateX2(e){const t=+e.target.value;!isNaN(t)&&t<=255&&this.input1<=t?(this.input2=t,this.buildGraph()):(this.input2+=1,this.input2-=1)},updateY2(e){const t=+e.target.value;!isNaN(t)&&t<=255&&0<=t?(this.output2=t,this.buildGraph()):(this.output2+=1,this.output2-=1)}},watch:{newImg(){this.buildGraph()},togglePreview(e){e?this.calculateCorrection():this.revertCorrection()}}};const rt=(0,r.A)(nt,[["render",st],["__scopeId","data-v-7e5aa84c"]]);var ct=rt;const ht=e=>((0,o.Qi)("data-v-113b31b9"),e=e(),(0,o.jt)(),e),dt={class:"sidebar"},ut={class:"panel-header"},pt=ht((()=>(0,o.Lk)("img",{src:Q},null,-1))),gt=[pt],mt={class:"input-fields"},vt=ht((()=>(0,o.Lk)("option",{value:"identity"},"Тождественное отображение",-1))),ft=ht((()=>(0,o.Lk)("option",{value:"sharpen"},"Повышение резкости",-1))),kt=ht((()=>(0,o.Lk)("option",{value:"gaussian"},"Фильтр Гаусса (3 на 3)",-1))),bt=ht((()=>(0,o.Lk)("option",{value:"blur"},"Прямоугольное размытие",-1))),Ct=[vt,ft,kt,bt],wt={class:"input-fields-wrapper"},Lt={class:"filtration-inputs"},Mt={class:"point-inputs"},yt=["value","onChange"],It={class:"corrections-preview"},Rt={class:"custom-checkbox"},xt={key:1,src:Se,alt:"Предпросмотр",style:{width:"24px",height:"24px",cursor:"pointer"}},Xt={class:"buttons"};function Tt(e,t,i,s,l,n){return(0,o.uX)(),(0,o.CE)("aside",dt,[(0,o.Lk)("div",ut,[(0,o.Lk)("button",{class:"close-button",onClick:t[0]||(t[0]=(...e)=>n.closeSetting&&n.closeSetting(...e))},gt)]),(0,o.Lk)("div",mt,[(0,o.Lk)("select",{onChange:t[1]||(t[1]=e=>n.applyPreset(e.target.value)),class:"filtration-preset"},Ct,32),(0,o.Lk)("div",wt,[(0,o.Lk)("div",Lt,[(0,o.Lk)("div",Mt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.kernel,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"point-inputs-column",key:t},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e,((e,i)=>((0,o.uX)(),(0,o.CE)("div",{key:i,class:"point-with-prefix"},[(0,o.Lk)("input",{value:l.kernel[t][i],onChange:e=>n.updateKernel(e,t,i)},null,40,yt)])))),128))])))),128))])])]),(0,o.Lk)("div",It,[(0,o.Lk)("div",Rt,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>l.togglePreview=e)},null,512),[[a.lH,l.togglePreview]]),l.togglePreview?((0,o.uX)(),(0,o.CE)("img",{key:0,src:Se,alt:"Предпросмотр",class:(0,g.C4)({"preview-active":l.togglePreview}),style:{width:"24px",height:"24px",cursor:"pointer"}},null,2)):((0,o.uX)(),(0,o.CE)("img",xt))])])]),(0,o.Lk)("div",Xt,[(0,o.Lk)("button",{class:"apply-button",onClick:t[3]||(t[3]=(...e)=>n.applyFiltration&&n.applyFiltration(...e))},"Применить"),(0,o.Lk)("button",{class:"reset-button",onClick:t[4]||(t[4]=(...e)=>n.resetValues&&n.resetValues(...e))},"Сброс")])])}i(7467),i(4732),i(9577),i(6280),i(7913),i(7801);var At={name:"sidebar-filtration",props:{xMouse:Number,yMouse:Number,origImg:Object,ih:Number,iw:Number,canvasRef:Object},data(){return{togglePreview:!1,kernel:[[0,0,0],[0,1,0],[0,0,0]]}},methods:{closeSetting(){this.$emit("closeSetting")},applyPreset(e){const t={identity:[[0,0,0],[0,1,0],[0,0,0]],sharpen:[[0,-1,0],[-1,5,-1],[0,-1,0]],gaussian:[[1,2,1],[2,4,2],[1,2,1]],blur:[[1,1,1],[1,1,1],[1,1,1]]};this.kernel=t[e]||t.identity},updateKernel(e,t,i){const a=+e.target.value;isNaN(a)||(this.kernel[t][i]=a)},calculateFiltration(){const e=this.canvasRef?.getContext("2d");if(!e)return;const t=e.getImageData(this.xMouse,this.yMouse,this.iw,this.ih),i=new Uint8ClampedArray(t.data.length),a=this.padImageData(t.data,t.width,t.height),o=3;Math.floor(o/2);for(let s=0;s<t.height;s++)for(let e=0;e<t.width;e++)for(let l=0;l<4;l++){let n=0;for(let i=0;i<o;i++)for(let r=0;r<o;r++){const o=4*((s+i)*(t.width+2)+(e+r))+l;n+=this.kernel[i][r]*a[o]}const r=4*(s*t.width+e)+l;i[r]=n,3===l&&(i[r]=255)}t.data.set(i),e.putImageData(t,this.xMouse,this.yMouse)},padImageData(e,t,i){const a=t+2,o=i+2,s=new Uint8ClampedArray(a*o*4);for(let l=0;l<i;l++)for(let i=0;i<t;i++){const o=4*(l*t+i),n=4*((l+1)*a+(i+1));s.set(e.subarray(o,o+4),n)}for(let l=0;l<o;l++)for(let e=0;e<a;e++){const t=4*(l*a+e);if(0===e||e===a-1||0===l||l===o-1){const i=Math.max(1,Math.min(e,a-2)),n=Math.max(1,Math.min(l,o-2)),r=4*(n*a+i);s.set(s.subarray(r,r+4),t)}}return s},resetValues(){this.applyPreset("identity"),this.revertFiltration()},revertFiltration(){this.togglePreview=!1,this.$emit("renderImage")},applyFiltration(){this.closeSetting(),this.calculateFiltration()}},watch:{togglePreview(e){e?this.calculateFiltration():this.revertFiltration()},kernel:{handler(){this.togglePreview&&this.calculateFiltration()},deep:!0}}};const Wt=(0,r.A)(At,[["render",Tt],["__scopeId","data-v-113b31b9"]]);var St=Wt;function Ft(e,t,i){const a=e.width,o=e.height,s=a/t,l=o/i,n=new Uint8ClampedArray(t*i*4);for(let r=0;r<i;r++)for(let i=0;i<t;i++){const o=Math.floor(i*s),c=Math.floor(r*l),h=4*(r*t+i),d=4*(c*a+o);n[h]=e.data[d],n[h+1]=e.data[d+1],n[h+2]=e.data[d+2],n[h+3]=e.data[d+3]}return new ImageData(n,t,i)}var _t={name:"ImageCanvas",components:{ImageFooter:j,ModalColor:We,CorrectionsModal:ct,FiltrationModal:St},emits:["closeResizeModal"],data(){return{imageWidth:0,imageHeight:0,selectedColor:null,selectedColors:"",selectedPixel:{x:0,y:0},canvasRef:null,newImg:null,selectedScale:100,isModalVisible:this.isResizeModalVisible,interpolationAlgorithm:"nearest-neighbor",resizeType:"pixels",newWidth:null,newHeight:null,maintainAspectRatio:!1,aspectRatio:1,widthPercent:null,heightPercent:null,colorInfoPanelVisible:!1,canvasOffsetX:0,offsetX:0,offsetY:0,canvasOffsetY:0,dragging:!1,correctionPanelVisible:!1,filtrPanelVisible:!1}},props:{activeTool:String,selectedImage:String,isResizeModalVisible:Boolean},mounted(){this.canvasRef=this.$refs.canvas,this.canvasRef.addEventListener("click",this.handleCanvasClick),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)},beforeUnmount(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)},watch:{isResizeModalVisible(e){this.isModalVisible=e,this.updateModal()},selectedImage(){this.selectedScale=100,this.handleImageProportions()},activeTool(e){"Пипетка"===e&&(this.colorInfoPanelVisible=!0),"Кривые"===e&&(this.correctionPanelVisible=!0),"Фильтрация"===e&&(this.filtrPanelVisible=!0)},newImg:{handler(){this.handleImageProportions()},deep:!0}},methods:{handleMouseDown(e){"Рука"===this.activeTool&&(this.dragging=!0,this.lastX=e.clientX,this.lastY=e.clientY,e.preventDefault())},handleMouseMove(e){if(this.dragging){const t=e.clientX-this.lastX,i=e.clientY-this.lastY;this.lastX=e.clientX,this.lastY=e.clientY,this.canvasRef.style.cursor="grabbing",this.canvasOffsetX+=t,this.canvasOffsetY+=i,this.renderImage(),e.preventDefault()}},handleMouseUp(e){this.dragging&&"Рука"===this.activeTool&&(this.dragging=!1,this.canvasRef.style.cursor="grab",e.preventDefault())},handleMouseLeave(e){this.dragging&&"Рука"===this.activeTool&&(this.dragging=!1,this.canvasRef.style.cursor="grab",e.preventDefault())},handleKeyDown(e){if("Рука"===this.activeTool&&!this.dragging){const t=e.shiftKey?5:1;switch(e.key){case"ArrowLeft":this.canvasOffsetX-=10*t,this.renderImage();break;case"ArrowRight":this.canvasOffsetX+=10*t,this.renderImage();break;case"ArrowUp":this.canvasOffsetY-=10*t,this.renderImage();break;case"ArrowDown":this.canvasOffsetY+=10*t,this.renderImage();break}}},handleKeyUp(e){e.key.startsWith("Arrow")&&this.renderImage()},renderImage(){const e=new Image,t=this.canvasRef,i=this.canvasRef?.getContext("2d"),a=this.$refs.canvas.parentNode.scrollLeft,o=this.$refs.canvas.parentNode.scrollTop,s=this.canvasRef.clientWidth,l=this.canvasRef.clientHeight;e.onload=()=>{i.clearRect(0,0,t.width,t.height),t.width=s,t.height=l;const n=this.calculateScaleFactor(e.width,e.height),r=Math.round(e.width*n*(this.selectedScale/100)),c=Math.round(e.height*n*(this.selectedScale/100));let h=Math.round((s-r)/2)+this.canvasOffsetX-a,d=Math.round((l-c)/2)+this.canvasOffsetY-o;this.offsetX=h,this.offsetY=d;const u=10;h=Math.min(Math.max(h,-r+u),s-u),d=Math.min(Math.max(d,-c+u),l-u),this.imageWidth=Math.round(e.width*n),this.imageHeight=Math.round(e.height*n),i.drawImage(e,h,d,r,c);const p=this.imageWidth/this.imageHeight;this.aspectRatio=p},e.src=this.selectedImage},renderImageAlgoritm(e){const t=this.canvasRef,i=this.canvasRef?.getContext("2d");e.onload=()=>{i.clearRect(0,0,t.width,t.height),t.width=this.canvasRef.clientWidth,t.height=this.canvasRef.clientHeight,i.imageSmoothingEnabled=!1;const a=Math.round(e.width*(this.selectedScale/100)),o=Math.round(e.height*(this.selectedScale/100)),s=Math.round((t.width-a)/2),l=Math.round((t.height-o)/2);this.offsetX=s,this.offsetY=l,i.drawImage(e,s,l,a,o),this.imageWidth=a,this.imageHeight=o},e.src=this.selectedImage},handleImageProportions(){this.newImg?this.renderImageAlgoritm(this.newImg):this.renderImage()},calculateScaleFactor(e,t){const i=this.$refs.canvas,a=50,o=i.width-2*a,s=i.height-2*a,l=o/e,n=s/t;return Math.min(l,n)},handleCanvasClick(e){const t=this.$refs.canvas.getBoundingClientRect(),i=(this.canvasRef.clientWidth-this.imageWidth)/2,a=(this.canvasRef.clientHeight-this.imageHeight)/2;if("Пипетка"===this.activeTool){const o=Math.round(e.clientX-t.left-i),s=Math.round(e.clientY-t.top-a);this.selectedPixel={x:o,y:s},this.updateSelectedColor()}},updateSelectedColor(){const e=this.selectedPixel.x,t=this.selectedPixel.y,i=e+(this.canvasRef.clientWidth-this.imageWidth)/2,a=t+(this.canvasRef.clientHeight-this.imageHeight)/2,o=this.canvasRef.getContext("2d"),s=o.getImageData(i,a,1,1).data,l=s[0],n=s[1],r=s[2];this.selectedColors=`rgb(${l}, ${n}, ${r})`,this.selectedColor={r:l,g:n,b:r}},handleModalConfirm(){if(this.scale=100,"pixels"===this.resizeType&&(this.newImg=new Image(this.newWidth,this.newHeight)),"percentage"===this.resizeType){const e=new Image;e.width=this.newWidth/100*this.imageWidth,e.height=this.newHeight/100*this.imageHeight,this.newImg=e}const e=this.canvasRef,t=e.getContext("2d"),i=t.getImageData(0,0,this.imageWidth,this.imageHeight),a=Ft(i,this.newWidth,this.newHeight);null!==a&&(e.width=this.newWidth,e.height=this.newHeight,t.putImageData(a,0,0)),this.canvasOffsetX=0,this.canvasOffsetY=0,this.renderImage(),this.closeResizeModal()},updateModal(){if("pixels"===this.resizeType){this.newWidth=this.imageWidth,this.newHeight=this.imageHeight;const e=this.imageWidth/this.imageHeight;this.aspectRatio=e}else"percentage"===this.resizeType&&(this.aspectRatio=1,this.widthPercent=this.newWidth,this.heightPercent=this.newHeight,this.newWidth=100,this.newHeight=100)},updateNewWidth(e){let t=Math.floor(+e.target.value);t<=0&&(t=1),t>7680&&(t=7680),this.newWidth=t,this.maintainAspectRatio&&(this.newHeight=Math.round(t/this.aspectRatio))},updateNewHeight(e){let t=Math.floor(+e.target.value);t<=0&&(t=1),t>4320&&(t=4320),this.newHeight=t,this.maintainAspectRatio&&(this.newWidth=Math.round(t*this.aspectRatio))},countPixels(){if("pixels"===this.resizeType)return(this.newWidth*this.newHeight/1e6).toFixed(4);if("percentage"===this.resizeType){const e=this.imageWidth,t=this.imageHeight,i=e*t;return(this.newWidth/100*(this.newHeight/100)*i/1e6).toFixed(4)}},handleScaleChange(e){this.selectedScale=e,this.handleImageProportions()},closeResizeModal(){this.isModalVisible=!1,this.$emit("closeResizeModal"),this.$emit("update:activeTool","")},saveImage(){const e=document.createElement("canvas"),t=e.getContext("2d");e.width=this.imageWidth,e.height=this.imageHeight,t.drawImage(this.newImg||this.$refs.canvas,0,0,this.imageWidth,this.imageHeight);const i=document.createElement("a");i.href=e.toDataURL("image/png"),i.download="my_image.png",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}};const Et=(0,r.A)(_t,[["render",H],["__scopeId","data-v-6dd2a4d1"]]);var Pt=Et,Ut=i.p+"img/W95-60.be64aa40.png",Ht=i.p+"img/W95-139.96f81896.png",zt=i.p+"img/W95-59.33392e51.png";const Vt=e=>((0,o.Qi)("data-v-f1f577a6"),e=e(),(0,o.jt)(),e),Yt={class:"sidebar"},Ot=Vt((()=>(0,o.Lk)("img",{src:Ut,alt:"Upload",class:"file-upload-icon"},null,-1))),Nt=[Ot],$t=["onClick"],Bt=["src","alt","onMouseover"],Dt={key:0,class:"tooltip"},Kt=Vt((()=>(0,o.Lk)("img",{src:Ht,alt:"Save images",title:"Скачать изображение",class:"file-upload-icon"},null,-1))),jt=[Kt],Qt={class:"upload__cont"},Gt={class:"url-upload-container"};function Zt(e,t,i,s,l,n){return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("aside",Yt,[(0,o.Lk)("div",{onClick:t[0]||(t[0]=(...e)=>n.openModalUpload&&n.openModalUpload(...e))},Nt),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.tools,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,onClick:t=>n.toggleToolActivation(e),class:(0,g.C4)({active:i.activeTool===e.name})},[(0,o.Lk)("img",{class:"tool__icon",src:e.icon,alt:e.name,onMouseover:t=>n.showTooltip(e.name),onMouseleave:t[1]||(t[1]=(...e)=>n.hideTooltip&&n.hideTooltip(...e))},null,40,Bt),l.showTooltipFlag&&l.currentTool===e.name?((0,o.uX)(),(0,o.CE)("span",Dt,(0,g.v_)(e.name),1)):(0,o.Q3)("",!0)],10,$t)))),128)),(0,o.Lk)("div",{onClick:t[2]||(t[2]=(...e)=>n.saveImage&&n.saveImage(...e))},jt)]),l.isModalVisible?((0,o.uX)(),(0,o.CE)("div",{key:0,onClick:t[8]||(t[8]=(...e)=>n.closeModal&&n.closeModal(...e)),class:"modal"},[(0,o.Lk)("div",{class:"modal-content",onClick:t[7]||(t[7]=(0,a.D$)((()=>{}),["stop"]))},[(0,o.Lk)("div",Qt,[(0,o.Lk)("img",{src:zt,alt:"Upload",class:"file-upload-button",onClick:t[3]||(t[3]=(...e)=>n.openFileInput&&n.openFileInput(...e))}),(0,o.Lk)("input",{ref:"fileInput",id:"file-upload",type:"file",accept:"image/*",onChange:t[4]||(t[4]=(...e)=>n.handleFileUpload&&n.handleFileUpload(...e)),style:{display:"none"}},null,544),(0,o.Lk)("div",Gt,[(0,o.bo)((0,o.Lk)("input",{id:"image-url",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>l.imageUrl=e),placeholder:"Введите URL изображения"},null,512),[[a.Jo,l.imageUrl]]),(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.loadImageFromUrl&&n.loadImageFromUrl(...e))},"Загрузить")])])])])):(0,o.Q3)("",!0)],64)}i(4603),i(7566),i(8721);var Jt={name:"sidebar-menu",emits:["imageSelected","update:activeTool","image-selected","openResizeModal"],props:{activeTool:String},data(){return{tools:[{id:1,name:"Пипетка",icon:i(2320)},{id:2,name:"Изменение размера",icon:i(3867)},{id:3,name:"Рука",icon:i(6752)},{id:4,name:"Кривые",icon:i(6408)},{id:5,name:"Фильтрация",icon:i(9396)}],showTooltipFlag:!1,currentTool:"",isModalVisible:!1,imageUrl:""}},methods:{toggleToolActivation(e){this.$emit("update:activeTool",this.activeTool===e.name?"":e.name),"Изменение размера"===e.name&&this.$emit("openResizeModal")},showTooltip(e){this.showTooltipFlag=!0,this.currentTool=e},hideTooltip(){this.showTooltipFlag=!1,this.currentTool=""},openModalUpload(){this.isModalVisible=!0},closeModal(){this.isModalVisible=!1},openFileInput(){this.$refs.fileInput.click()},handleFileUpload(e){const t=e.target,i=t.files?.[0];if(i){const e=URL.createObjectURL(i);this.selectedImage=e,this.$emit("image-selected",e),t.value=""}this.closeModal()},loadImageFromUrl(){this.$emit("image-selected",this.imageUrl),this.selectedImage=this.imageUrl,this.imageUrl="",this.closeModal()},saveImage(){this.$emit("save-image")}},beforeUnmount(){this.selectedImage&&URL.revokeObjectURL(this.selectedImage)}};const qt=(0,r.A)(Jt,[["render",Zt],["__scopeId","data-v-f1f577a6"]]);var ei=qt,ti={name:"HomePage",components:{ImageCanvas:Pt,Sidebar:ei},data(){return{activeTool:"",selectedImage:null,selectedColor:null,isResizeModalVisible:!1}},methods:{handleImageSelected(e){this.selectedImage=e},handleColorSelected(e){this.selectedColor=e},handleOpenResizeModal(){this.isResizeModalVisible=!0},handleCloseResizeModal(){this.isResizeModalVisible=!1},saveImage(){this.$refs.imageCanvas.saveImage()}}};const ii=(0,r.A)(ti,[["render",p],["__scopeId","data-v-7c7d06a6"]]);var ai=ii;const oi={class:"input-container"},si={key:0,class:"words-container"};function li(e,t,i,s,l,n){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",oi,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.inputCode=t),placeholder:"Введите код"},null,512),[[a.Jo,e.inputCode]]),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...t)=>e.checkCode&&e.checkCode(...t))},"Проверить")]),e.showWords?((0,o.uX)(),(0,o.CE)("div",si,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.shuffledWords,((t,i)=>((0,o.uX)(),(0,o.CE)("div",{key:i,style:(0,g.Tr)(e.randomPosition()),class:"word"},(0,g.v_)(t),5)))),128))])):(0,o.Q3)("",!0)])}var ni=i(144),ri=(0,o.pM)({name:"CodeChecker",setup(){const e=(0,ni.KR)(""),t="hBKat",i=(0,ni.KR)(!1),a=["Окно","Шторы","Лампа","Стул","Диван","Цветок"],o=(0,ni.KR)([]),s=()=>{e.value===t?(i.value=!0,o.value=l(a)):alert("Неверный код! Попробуйте снова.")},l=e=>e.map((e=>({value:e,sort:Math.random()}))).sort(((e,t)=>e.sort-t.sort)).map((({value:e})=>e)),n=()=>{const e=80*Math.random()+10,t=80*Math.random()+10;return{position:"absolute",left:`${e}%`,top:`${t}%`}};return{inputCode:e,correctCode:t,showWords:i,words:a,shuffledWords:o,checkCode:s,randomPosition:n}}});const ci=(0,r.A)(ri,[["render",li],["__scopeId","data-v-e409161a"]]);var hi=ci;const di=[{path:"/",name:"home",component:ai},{path:"/gnsldkfgadf32lmHB20",name:"hb",component:hi}],ui=(0,d.aE)({history:(0,d.Bt)(),routes:di});var pi=ui,gi=i(782),mi=(0,gi.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,a.Ef)(h).use(mi).use(pi).mount("#app")},6752:function(e,t,i){e.exports=i.p+"img/W95-104.b954bc29.png"},9396:function(e,t,i){e.exports=i.p+"img/W95-38.f28de1b8.png"},2320:function(e,t,i){e.exports=i.p+"img/W95-63.2325959d.png"},6408:function(e,t,i){e.exports=i.p+"img/W95-78.8bb7197c.png"},3867:function(e,t,i){e.exports=i.p+"img/W95-82.313f3b0e.png"}},t={};function i(a){var o=t[a];if(void 0!==o)return o.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,i),s.exports}i.m=e,function(){var e=[];i.O=function(t,a,o,s){if(!a){var l=1/0;for(h=0;h<e.length;h++){a=e[h][0],o=e[h][1],s=e[h][2];for(var n=!0,r=0;r<a.length;r++)(!1&s||l>=s)&&Object.keys(i.O).every((function(e){return i.O[e](a[r])}))?a.splice(r--,1):(n=!1,s<l&&(l=s));if(n){e.splice(h--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[a,o,s]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.p="/photoeditor/"}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,s,l=a[0],n=a[1],r=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(o in n)i.o(n,o)&&(i.m[o]=n[o]);if(r)var h=r(i)}for(t&&t(a);c<l.length;c++)s=l[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(h)},a=self["webpackChunkphoto_editor"]=self["webpackChunkphoto_editor"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=i.O(void 0,[504],(function(){return i(1246)}));a=i.O(a)})();
//# sourceMappingURL=app.6e309a3e.js.map